(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{1730:function(t,a,e){Promise.resolve().then(e.t.bind(e,63385,23)),Promise.resolve().then(e.bind(e,85716))},96443:function(t,a,e){"use strict";let n=!!window.Capacitor&&window.Capacitor.isNativePlatform&&window.Capacitor.isNativePlatform();a.Z={apiBaseUrl:"http://10.67.11.156:8000",isNative:n,ollamaUrl:"http://localhost:11434",appName:"Nokia NOC",appVersion:"1.0.0"}},85716:function(t,a,e){"use strict";e.r(a),e.d(a,{DashboardProvider:function(){return s},useDashboard:function(){return u}});var n=e(3827),i=e(64090),r=e(73107),o=e(96443);let l=(0,i.createContext)(),c=o.Z.apiBaseUrl;function s(t){let{children:a}=t,[e,o]=(0,i.useState)(null),[s,u]=(0,i.useState)(null),[f,d]=(0,i.useState)(null),[h,p]=(0,i.useState)(null),[k,w]=(0,i.useState)(null),[b,m]=(0,i.useState)("Link_A"),[v,y]=(0,i.useState)(!0),[C,g]=(0,i.useState)(null),[E,N]=(0,i.useState)(!1),S=(0,i.useCallback)(async t=>{try{let a=await r.Z.get("".concat(c,"/api/link-traffic?link_id=").concat(t));p(a.data)}catch(a){console.error("Error fetching traffic data for ".concat(t,":"),a)}},[]),_=(0,i.useCallback)(async()=>{try{let t=(await r.Z.get("".concat(c,"/api/link-traffic"))).data,a={};t.forEach(t=>{let e=t.link_id;a[e]||(a[e]=[]),a[e].push(t)}),w(a)}catch(t){console.error("Error fetching all links traffic:",t)}},[]),P=(0,i.useCallback)(async function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!E||t)try{y(!0);let[t,a,e]=await Promise.all([r.Z.get("".concat(c,"/api/topology")),r.Z.get("".concat(c,"/api/correlation")),r.Z.get("".concat(c,"/api/capacity-summary"))]);o(t.data),u(a.data),d(e.data),await _();let n=t.data.links?Object.keys(t.data.links)[0]:null;!n||b&&t.data.links[b]?b&&await S(b):(m(n),await S(n)),N(!0),y(!1),g(null)}catch(t){console.error("Error fetching dashboard data:",t),g("Failed to load system data."),y(!1)}},[E,_,S,b]);return(0,i.useEffect)(()=>{P()},[P]),(0,i.useEffect)(()=>{b&&E&&S(b)},[b,E,S]),(0,n.jsx)(l.Provider,{value:{topology:e,correlation:s,capacitySummary:f,trafficData:h,allLinksTraffic:k,selectedLink:b,setSelectedLink:m,loading:v,error:C,fetchDashboardData:P,isInitialized:E},children:a})}function u(){let t=(0,i.useContext)(l);if(!t)throw Error("useDashboard must be used within a DashboardProvider");return t}},63385:function(){}},function(t){t.O(0,[107,971,69,744],function(){return t(t.s=1730)}),_N_E=t.O()}]);